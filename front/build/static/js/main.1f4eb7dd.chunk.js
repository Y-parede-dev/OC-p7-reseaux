(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{25:function(e,t,s){},26:function(e,t,s){},28:function(e,t,s){},29:function(e,t,s){},30:function(e,t,s){},32:function(e,t,s){},33:function(e,t,s){},34:function(e,t,s){},35:function(e,t,s){},36:function(e,t,s){},37:function(e,t,s){},38:function(e,t,s){},39:function(e,t,s){},40:function(e,t,s){},41:function(e,t,s){},50:function(e,t,s){"use strict";s.r(t);var n=s(1),o=s.n(n),c=s(17),a=s.n(c),i=(s(25),s(2)),r=s.p+"static/media/logo.6290aae4.svg",l=(s(26),s(0));window.onscroll=function(){j()};var m=!1;sessionStorage.setItem("scroll",m);var d=window.location.href.split("/")[3],u="selected-li selected-li-co",p="selected-li-co selected-li focus-on-position",j=function(){var e=document.getElementById("sign-log");"account"==d&&document.body.scrollTop>100||document.documentElement.scrollTop>100?(e.className="ul-sign-log scrol-fixed",m=!0,sessionStorage.setItem("scroll",m)):(e.className="ul-sign-log",m=!1,sessionStorage.setItem("scroll",m))};var f=function(e){var t=e.isConected;return e.setIsConected,Object(l.jsxs)("header",{className:"App-header",children:[Object(l.jsxs)("div",{className:"header",children:[Object(l.jsx)("h1",{className:"header-title ",children:"groupomania"}),Object(l.jsx)("img",{src:r,className:"App-logo",alt:"logo Groupomania"})]}),t?Object(l.jsxs)("ul",{onScroll:j,id:"sign-log",className:" ul-sign-log",children:[Object(l.jsx)("li",{children:Object(l.jsxs)("a",{className:d.includes("main")||"main"==d?p:u,id:"Acceuil",href:"./main",children:[Object(l.jsx)("i",{className:"fas-custom-header-isCo fas-home-custom fas fa-home"}),Object(l.jsx)("p",{className:"none-on-small",children:"Acceuil"})]})}),Object(l.jsx)("li",{children:Object(l.jsxs)("a",{className:d.includes("account")||"account"==d||"modify"==d?p:u,id:"Account",href:"./account",children:[Object(l.jsx)("i",{className:"fas-custom-header-isCo fas-adress-card-custom fas fa-address-card"}),Object(l.jsx)("p",{className:"none-on-small",children:"Mon compte"})]})}),Object(l.jsx)("li",{children:Object(l.jsxs)("a",{className:"selected-li selected-li-co",id:"Disconect",onClick:function(){sessionStorage.clear()},href:"./",children:[Object(l.jsx)("i",{className:"fas-custom-header-isCo fas fa-sign-out-alt"}),Object(l.jsx)("p",{className:"none-on-small",children:"Se d\xe9connecter"})]})})]}):Object(l.jsxs)("ul",{onScroll:j,id:"sign-log",className:"ul-sign-log",children:[Object(l.jsx)("li",{children:Object(l.jsx)("a",{className:"selected-li",href:"./signup",children:"nouveau compte"})}),Object(l.jsx)("li",{children:Object(l.jsx)("a",{className:"selected-li",id:"login-link",href:"./login",children:"se connecter"})})]})]})},b=s(16),h=s(18),O=function(e){return Object(l.jsxs)(h.a,Object(b.a)(Object(b.a)({speed:1.8,width:350,height:500,viewBox:"0 0 500 400",backgroundColor:"#2f435e",foregroundColor:"#ffffff"},e),{},{children:[Object(l.jsx)("path",{d:"M 484.52 64.61 H 15.65 C 7.1 64.61 0.17 71.2 0.17 79.31 v 220.51 c 0 8.12 6.93 14.7 15.48 14.7 h 468.87 c 8.55 0 15.48 -6.58 15.48 -14.7 V 79.31 c 0 -8.11 -6.93 -14.7 -15.48 -14.7 z m -9 204.34 c 0 11.84 -7.14 21.44 -15.94 21.44 h -23.19 l -77.23 -118.87 c -7.1 -10.92 -19.67 -11.16 -27 -0.51 l -73.52 106.93 C 253.78 285 245.73 286 240 280.2 l -79.75 -80.62 c -6 -6.06 -14.33 -5.7 -20 0.88 l -77.91 89.93 H 40.63 c -8.8 0 -15.94 -9.6 -15.94 -21.44 V 110.19 c 0 -11.84 7.14 -21.44 15.94 -21.44 h 418.91 c 8.8 0 15.94 9.6 15.94 21.44 z"}),Object(l.jsx)("rect",{x:"69",y:"1",rx:"5",ry:"5",width:"87",height:"16"}),Object(l.jsx)("rect",{x:"412",y:"359",rx:"5",ry:"5",width:"87",height:"16"}),Object(l.jsx)("rect",{x:"69",y:"25",rx:"4",ry:"4",width:"167",height:"27"}),Object(l.jsx)("circle",{cx:"31",cy:"31",r:"29"})]}))},g=(s(28),function(){var e=new Headers;return e.append("Content-Type","application/json"),e}),x=function(e,t){if(e.includes("http://www.")||e.includes("https://www"))if(e.includes(" http"))if(e.includes("https:")){var s=e.split("https:")[1];if(t.set("content",e.split("https:")[0]),e.includes("&t")||e.includes("&l")){if(e.includes("&t")){var n=s.split("&t")[0];t.set("url_web","https:".concat(n))}if(e.includes("&l")){var o=s.split("&l")[0];t.set("url_web","https:".concat(o))}}else t.set("url_web","https:".concat(s))}else{var c=e.split("http:")[1];if(t.set("content",e.split("http:")[0]),e.includes("&t")||e.includes("&l")){if(e.includes("&t")){var a=c.split("&t")[0];t.set("url_web","http:".concat(a))}if(e.includes("&l")){var i=c.split("&l")[0];t.set("url_web","http:".concat(i))}}else t.set("url_web","http:".concat(c))}else{if(e.includes("&t")){var r=e.split("&t")[0];t.set("url_web",r)}if(e.includes("&l")){var l=e.split("&l")[0];t.set("url_web",l)}}else"undefined"==e&&t.set("content",""),t.set("content",e)},v=function(e,t){t(1!=e)};s(29);var N=function(e){var t=e.postId,s=e.commentUpp,o=e.setCommentUpp,c=Object(n.useState)(""),a=Object(i.a)(c,2),r=a[0],m=a[1],d=sessionStorage.getItem("token+id"),u=JSON.parse(d),p=sessionStorage.getItem("userIsCo"),j=JSON.parse(p);return Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={user_id:"",content:r,post_id:t};n.user_id=j.id;var c=new Headers;c.append("Content-type","application/json"),c.append("Authorization","Bearer "+u.token);var a={method:"POST",headers:c,mode:"cors",cache:"default",body:JSON.stringify(n)};v(s,o),m(""),fetch("http://localhost:3001/api/comment",a).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},id:"form-create-comment",children:[Object(l.jsx)("label",{htmlFor:"content-new-comment"}),Object(l.jsx)("textarea",{className:"form-control-comment",type:"text",name:"content-new-comment",value:r,onChange:function(e){m(e.target.value)}}),Object(l.jsx)("button",{className:"form-control-comment form-control-comment-submit",name:"submit-login",type:"submit",children:"envoyer"})]})},S=function(e){var t=e.commentUpp,s=e.setCommentUpp,n=sessionStorage.getItem("token+id"),o=JSON.parse(n),c=sessionStorage.getItem("comment-modif"),a=JSON.parse(c);console.log(a);var i={post_id:a.post_id_comment,user_id:a.comment_user_id,comment_id:a.comment_id},r=new Headers;r.append("Authorization","Bearer "+o.token),r.append("Content-Type","application/json");var l={method:"DELETE",headers:r,mode:"cors",cache:"default",body:JSON.stringify(i)};fetch("http://localhost:3001/api/comment/"+a.comment_id,l).then((function(e){return e.json()})).catch((function(e){return console.log(e)})),v(t,s)},w=(s(30),function(e){var t=e.setCommentOnModif,s=e.commentUpp,o=e.setCommentUpp,c=Object(n.useState)(""),a=Object(i.a)(c,2),r=a[0],m=a[1],d=sessionStorage.getItem("token+id"),u=JSON.parse(d),p=sessionStorage.getItem("userIsCo"),j=JSON.parse(p),f=sessionStorage.getItem("comment-modif"),b=JSON.parse(f);return Object(l.jsx)("section",{className:"modif-comment",children:Object(l.jsxs)("form",{id:"form-modif-comment",onSubmit:function(e){e.preventDefault();var n={user_id:"",comment_id:b.comment_id,content:b.content};n.user_id=j.id,r!=b.content&&(n.content=r);var c=new Headers;c.append("Authorization","Bearer "+u.token),c.append("Content-type","application/json");var a={method:"PUT",headers:c,mode:"cors",cache:"default",body:JSON.stringify(n)};fetch("http://localhost:3001/api/comment/"+b.comment_id,a).then((function(e){return e.json()})).catch((function(e){return console.log(e)})),sessionStorage.removeItem("comment-modif"),v(s,o),t("")},children:[Object(l.jsx)("label",{htmlFor:"content-modif-comment"}),Object(l.jsx)("textarea",{className:"form-control",type:"text",name:"content-modif-comment",value:r,onChange:function(e){m(e.target.value)}}),Object(l.jsx)("button",{onClick:function(){return t("")},className:"form-control form-control-modif-comment-annuler",name:"annuler",type:"button",children:"annulez"}),Object(l.jsx)("button",{className:"form-control form-control-modif-comment",name:"submit",type:"submit",children:"envoyer"})]})})}),_=s(8),y=s.n(_),C=s(9),I={method:"GET",headers:new Headers,mode:"cors",cache:"default"},k=function(){var e=Object(C.a)(y.a.mark((function e(t,s,n){var o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,I).then((function(e){return e.json()})).then((function(e){n(e.result),s(!0)}));case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})));return function(t,s,n){return e.apply(this,arguments)}}(),J=function(){var e=Object(C.a)(y.a.mark((function e(t,s,n,o){var c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,I).then((function(e){return e.json()})).then((function(e){n(!0),s(e.result)}),(function(e){n(!0),o(e)}));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t,s,n,o){return e.apply(this,arguments)}}();function F(e){var t=Object(n.useState)(null),s=Object(i.a)(t,2),o=s[0],c=s[1],a=Object(n.useState)(!1),r=Object(i.a)(a,2),m=r[0],d=r[1],u=Object(n.useState)([]),p=Object(i.a)(u,2),j=p[0],f=p[1],b=Object(n.useState)(""),h=Object(i.a)(b,2),O=h[0],g=h[1],x=Object(n.useState)(!1),v=Object(i.a)(x,2),_=v[0],y=v[1],C=e.userCoId,I=sessionStorage.getItem("userIsCo"),k=JSON.parse(I),F=e.postId,E=JSON.stringify(F),D=parseInt(E,10),T="http://localhost:3001/api/comment/".concat(F);Object(n.useEffect)((function(){J(T,f,d,c);var e=new Headers;fetch(T,{method:"GET",headers:e,mode:"cors",cache:"default"}).then((function(e){return e.json()})).then((function(e){d(!0),f(e.result),console.log(e)}),(function(e){d(!0),c(e)}))}),[_]);return o?Object(l.jsxs)("div",{children:["Erreur : ",o.message]}):m?Object(l.jsxs)("div",{className:"comment",id:"comment-".concat(D),children:[Object(l.jsx)(N,{commentUpp:_,setCommentUpp:y,postId:F}),Object(l.jsx)("ul",{className:"comment-ul",children:j.map((function(e){return Object(l.jsxs)("li",{className:"comment-content",children:[Object(l.jsx)("img",{alt:"avatar user comment",className:"avatar-comment",src:T.split("api")[0]+"images/avatars/"+e.avatar_user}),Object(l.jsx)("div",{className:"comment-user-content",children:Object(l.jsx)("p",{className:"comment-user",children:"".concat(e.comment_user," ").concat(e.comment_user_prenom)})}),Object(l.jsx)("div",{className:"content-comment-or-modif",children:e.comment_id!=O.comment_id?Object(l.jsxs)("div",{className:"content-comment",children:[Object(l.jsx)("div",{className:"comment-text-content",children:Object(l.jsx)("p",{className:"comment-text",children:e.comment_content})}),Object(l.jsx)("div",{className:"parametre-post parametre-comment",children:Object(l.jsx)("button",{"aria-label":"settings",className:"dropbtn dropbtn-comment",onClick:function(){return function(e,t){sessionStorage.setItem("comment-modif",JSON.stringify(e));var s="myDropdown-".concat(t);document.getElementById(s).classList.toggle("show"),document.getElementById(s).classList.toggle("comment")}(e,e.comment_id)},children:Object(l.jsx)("i",{className:"fas fa-ellipsis-h"})})}),Object(l.jsx)("div",{className:"parametre-comment-open",children:Object(l.jsx)("div",{className:"dropdown bkcol",children:C==e.comment_user_id||1==k.isAdmin?Object(l.jsxs)("div",{className:"dropdown-content dropdown-content-comment",id:"myDropdown-".concat(e.comment_id),children:[Object(l.jsx)("input",{type:"button",className:"btn-more-params-post btn-more-params-comment",onClick:function(){g(e)},href:"../modify-post",value:"modifier"}),Object(l.jsx)("input",{type:"button",className:"btn-more-params-post btn-more-params-comment btn-more-params-comment-del",onClick:function(){return S({commentUpp:_,setCommentUpp:y})},value:"suprimer"})]}):Object(l.jsx)("div",{className:"dropdown-content dropdown-content-comment",id:"myDropdown-".concat(e.comment_id),children:Object(l.jsx)("a",{className:"btn-more-params-post btn-more-params-comment btn-more-params-comment-sign",href:"#",children:"signaler"})})})})]}):Object(l.jsx)(w,{setCommentOnModif:g,commentUpp:_,setCommentUpp:y,ifAdmin:k.isAdmin})})]},Date.now()+e.post_id_comment+e.comment_id)}))})]}):Object(l.jsx)("div",{children:"Chargement..."})}s(32),s(33);var E=function(e){var t=e.postM,s=e.setPostM,o=Object(n.useState)(""),c=Object(i.a)(o,2),a=c[0],r=c[1],m=Object(n.useState)([]),d=Object(i.a)(m,2),u=d[0],p=d[1],j=sessionStorage.getItem("token+id"),f=JSON.parse(j),b=sessionStorage.getItem("userIsCo"),h=JSON.parse(b),O=sessionStorage.getItem("post-modif"),g=JSON.parse(O);return Object(l.jsx)("section",{className:"modif-post",children:Object(l.jsxs)("form",{id:"form-modif-post",onSubmit:function(e){s(1!=t),e.preventDefault();var n=new FormData;n.append("user_id",""),n.append("post_id",g.id_post),n.append("content",g.content),n.append("image_url",g.image_url),n.append("url_web",g.url_web),n.set("user_id",h.id),u!=[]&&n.set("image_url",u),x(a,n);var o=new Headers;o.append("Authorization","Bearer "+f.token);var c={method:"PUT",headers:o,mode:"cors",cache:"default",body:n};fetch("http://localhost:3001/api/post/"+g.id_post,c).then((function(e){return e.json()})).catch((function(e){return console.log(e)})),sessionStorage.removeItem("post-modif")},children:[Object(l.jsx)("label",{htmlFor:"content-modif-post"}),Object(l.jsx)("textarea",{className:"form-control",type:"text",name:"content-modif-post",value:a,onChange:function(e){r(e.target.value)}}),Object(l.jsx)("label",{className:"image-post-label pos-lab-on-input",htmlFor:"image-modif-post",children:Object(l.jsx)("i",{className:"fas fa-image"})}),Object(l.jsx)("input",{className:"form-control image-post image-post-modif pos-lab-on-input",type:"file",name:"image-modif-post",accept:"image/*",onChange:function(e){console.log(e.target.files[0]);var t=e.target.files[0];p(t),console.log(t)}}),Object(l.jsx)("button",{onClick:function(){return window.location.href="./main"},className:"form-control form-control-modif-post form-control-modif-post-annuler",name:"annuler",type:"button",children:"annulez"}),Object(l.jsx)("button",{className:"form-control form-control-modif-post",name:"submit",type:"submit",children:"envoyer"})]})})},D=function(e){var t=e.setPostM,s=e.postM,n=sessionStorage.getItem("token+id"),o=JSON.parse(n),c=sessionStorage.getItem("post-modif"),a=JSON.parse(c);console.log(a);var i={user_id:a.user_id,post_id:a.id_post},r=new Headers;r.append("Authorization","Bearer "+o.token),r.append("Content-Type","application/json");var l={method:"DELETE",headers:r,mode:"cors",cache:"default",body:JSON.stringify(i)};fetch("http://localhost:3001/api/post/"+a.id_post,l).then((function(e){return e.json()})).catch((function(e){return console.log(e)})),sessionStorage.removeItem("post-modif"),t(1!=s)},T=function(e){var t=e.id_post,s=e.btnToglComment,o=e.url,c=Object(n.useState)(!1),a=Object(i.a)(c,2),r=a[0],m=a[1],d=Object(n.useState)(0),u=Object(i.a)(d,2),p=u[0],j=u[1];Object(n.useEffect)((function(){var e="".concat(o,"/").concat(t,"/like");fetch(e).then((function(e){return e.json()})).then((function(e){console.log(e.result),e.result.forEach((function(e){console.log(e.likes),j(e.likes)}))}))}),[r]);return Object(l.jsxs)("div",{className:"like-unlike",children:[Object(l.jsx)("button",{alt:"like",onLoad:function(){},onClick:function(){!function(e,t){var s=new Headers;s.set("Content-type","application/json");var n="http://localhost:3001/api/post/".concat(e,"/like"),o=sessionStorage.getItem("userIsCo"),c={post_id:e,user_id:JSON.parse(o).id,like_numb:t},a={method:"POST",headers:s,mode:"cors",cache:"default",body:JSON.stringify(c)};!function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n,a).then((function(e){return e.json()}));case 2:return t=e.sent,v(r,m),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}(t,p)},id:"like-".concat(t),className:"like",children:Object(l.jsx)("i",{className:"fas fa-heart"})}),Object(l.jsx)("span",{className:"like-count",id:"like-count-".concat(t),children:p}),Object(l.jsx)("button",{alt:"like",onClick:function(){return s(t)},className:"btn-comment",children:Object(l.jsx)("i",{className:"far fa-comments"})})]})},M=(s(34),function(e){var t=e.postId;return Object(l.jsxs)("form",{id:"signaler-".concat(t),className:"comment form-signaler",children:[Object(l.jsxs)("div",{className:"propos propos-sexiste",children:[Object(l.jsx)("input",{id:"propos-sexiste",name:"propos-sexiste",onClick:function(){},type:"checkbox"}),Object(l.jsx)("label",{htmlFor:"propos-sexiste",children:"propos-sexiste"})]}),Object(l.jsxs)("div",{className:"propos propos-raciste",children:[Object(l.jsx)("input",{id:"propos-raciste",name:"propos-raciste",type:"checkbox"}),Object(l.jsx)("label",{htmlFor:"propos-raciste",children:"propos-raciste"})]}),Object(l.jsxs)("div",{className:"propos propos-difflamatoire",children:[Object(l.jsx)("input",{id:"propos-difflamatoire",name:"propos-difflamatoire",type:"checkbox"}),Object(l.jsx)("label",{htmlFor:"propos-difflamatoire",children:"propos-difflamatoire"})]}),Object(l.jsx)("button",{type:"submit",children:"envoyer"})]})});function A(e){var t=e.postM,s=e.setPostM,o=e.url,c=Object(n.useState)(!1),a=Object(i.a)(c,2),r=a[0],m=a[1],d=Object(n.useState)(""),u=Object(i.a)(d,2),p=u[0],j=u[1],f=Object(n.useState)(""),b=Object(i.a)(f,2),h=b[0],g=b[1],x=Object(n.useState)(null),v=Object(i.a)(x,2),N=v[0],S=(v[1],Object(n.useState)(!1)),w=Object(i.a)(S,2),_=w[0],y=w[1],C=Object(n.useState)([]),I=Object(i.a)(C,2),J=I[0],A=I[1],P=sessionStorage.getItem("token+id"),z=JSON.parse(P),B=sessionStorage.getItem("userIsCo"),U=JSON.parse(B),L=function(e,t,s){sessionStorage.setItem("post-modif",JSON.stringify(e));var n=t+"-"+s;document.getElementById(n).classList.toggle("show-signaler"),document.querySelector("body").classList.toggle(".body")},H=function(e){var t="comment-".concat(e);document.getElementById(t).classList.toggle("show")};return console.log(J),Object(n.useEffect)((function(){g(z.user_id),setTimeout((function(){k(o,y,A)}),300),console.log(J)}),[t]),N?Object(l.jsxs)("div",{children:["Erreur : ",N.message]}):Object(l.jsxs)("div",{className:"side-post",children:[" ",Object(l.jsx)("div",{id:"post-full",className:"cards",children:J.map((function(e){return Object(l.jsx)("div",{id:"post-".concat(e.id_post),className:"card-content",children:_?Object(l.jsxs)("div",{className:"card-content-or-load",children:[Object(l.jsxs)("div",{className:"header-post",children:[Object(l.jsx)("img",{alt:"Avatar Utilisateur",src:o.split("api")[0]+"images/avatars/"+e.avatar,className:"avatar-on-post"}),Object(l.jsxs)("div",{className:"post-name-date",children:[Object(l.jsx)("p",{className:"post-name",children:e.nom_post+" "+e.prenom_post}),Object(l.jsx)("p",{className:"post-date",children:e.date_post})]}),Object(l.jsx)("div",{className:"parametre-post",children:Object(l.jsx)("button",{"aria-label":"settings",className:"dropbtn",onClick:function(){return function(e,t,s){sessionStorage.setItem("post-modif",JSON.stringify(e));var n=t+"-"+s;document.getElementById(n).classList.toggle("show")}(e,"myDropdown",e.id_post)},children:Object(l.jsx)("i",{className:"fas fa-ellipsis-h"})})}),Object(l.jsx)("div",{className:"parametre-post-open",children:Object(l.jsx)("div",{className:"dropdown bkcol",children:h==e.user_id||1==U.isAdmin?Object(l.jsxs)("div",{className:"dropdown-content",id:"myDropdown-".concat(e.id_post),children:[Object(l.jsx)("input",{type:"button",className:"btn-more-params-post",onClick:function(){return j(e),void m(!r)},value:"modifier"}),Object(l.jsx)("input",{type:"button",className:"btn-more-params-post btn-more-params-post-del",onClick:function(){return D({postM:t,setPostM:s})},value:"suprimer"})]}):Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"dropdown-content",id:"myDropdown-".concat(e.id_post),children:Object(l.jsx)("input",{type:"button",className:"btn-more-params-post",onClick:function(){L(e,"signaler",e.id_post)},value:"signaler"})}),Object(l.jsx)("div",{})]})})})]}),Object(l.jsx)("div",{className:"content-or-modif",children:e.id_post!=p.id_post?Object(l.jsxs)("div",{className:"content-post",children:[Object(l.jsx)(M,{className:"comment",postId:e.id_post,id:"signaler-".concat(e.id_post)}),""!=e.content_post&&Object(l.jsx)("p",{className:"text-post",children:e.content_post}),Object(l.jsx)("div",{className:"media_post",children:null!=e.url_web&&"null"!=e.url_web?Object(l.jsx)("iframe",{alt:"video poster par utilisateur",className:"iframe-media",width:"100%",height:"400px",src:"undefined"!=e.url_web?e.url_web.split("watch?v=").join("embed/"):"",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:"allowfullscreen"}):Object(l.jsx)("div",{className:"media-post",children:null!=e.image_post&&"null"!=e.image_post&&Object(l.jsx)("img",{width:"100%",height:"auto",className:"iframe-media",alt:"file post",src:"undefined"!=e.image_post?o.split("api")[0]+"images/posts/"+e.image_post:""})})})]}):Object(l.jsx)(E,{postM:t,setPostM:s})}),Object(l.jsx)("div",{className:"header-comment",children:Object(l.jsx)(T,{url:o,id_post:e.id_post,btnToglComment:H})}),Object(l.jsx)("div",{className:"comment-before",children:Object(l.jsx)(F,{id:"comment-".concat(e.id_post),postId:e.id_post,userCoId:h,btnToglSignaler:L})})]}):Object(l.jsx)(O,{})},Date.now()+2*(e.id_post+e.user_id))}))})]})}s(35);var P=function(e){var t=e.postM,s=e.setPostM,o=Object(n.useState)(""),c=Object(i.a)(o,2),a=c[0],r=c[1],m=Object(n.useState)([]),d=Object(i.a)(m,2),u=d[0],p=d[1],j=sessionStorage.getItem("token+id"),f=JSON.parse(j),b=sessionStorage.getItem("userIsCo"),h=JSON.parse(b);return Object(l.jsxs)("form",{id:"form-create-post",onLoad:function(){var e=sessionStorage.getItem("scroll"),t=document.getElementById("form-create-post");e&&(t.className="with-scroll")},onSubmit:function(e){s(1!=t),e.preventDefault();var n=(new Date).toLocaleString("fr-Fr",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),o=new FormData;if(o.append("user_id",""),o.append("content",""),o.append("date_post",n),o.append("image_url",null),o.append("url_web",null),o.set("user_id",h.id),x(a,o),a.includes("http://www.")||a.includes("https://www"))if(o.set("image_url",null),a.includes(" http"))if(a.includes("https:")){o.set("content",a.split("https:")[0]);var c=a.split("https:")[1],i=c;if(a.includes("&list"))i=c.split("&list")[0],o.set("url_web","https:".concat(i));else{var r=a.split("https:")[1];o.set("url_web","https:".concat(r))}}else{o.set("content",a.split("http:")[0]);var l=a.split("http:")[1],m=l;if(a.includes("&list"))m=l.split("&list")[0],o.set("url_web","http:".concat(m));else{var d=a.split("http:")[1];o.set("url_web","http:".concat(d))}}else a.includes("&list")?o.set("url_web",a.split("&list")[0]):o.set("url_web",a);else u!=[]&&o.set("image_url",u),o.set("content",a);var p=new Headers;p.append("Authorization","Bearer "+f.token),fetch("http://localhost:3001/api/post",{method:"POST",headers:p,mode:"cors",cache:"default",body:o}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},children:[Object(l.jsx)("p",{className:"title-form-post"}),Object(l.jsx)("label",{htmlFor:"content-post"}),Object(l.jsx)("textarea",{className:"form-control",type:"text",name:"content-post",placeholder:"Que souhaitez vous poster ".concat(h.prenom," ?"),value:a,onChange:function(e){r(e.target.value)}}),Object(l.jsx)("label",{className:"image-post-label",htmlFor:"image-post",children:Object(l.jsx)("i",{className:"fas fa-image"})}),Object(l.jsx)("input",{className:"form-control image-post",type:"file",name:"image-post",accept:"image/*",onChange:function(e){console.log(e.target.files[0]);var t=e.target.files[0];p(t),console.log(t)}}),Object(l.jsx)("button",{className:"form-control form-control-su",name:"submit-login",type:"submit",children:"envoyer"})]})};var z=function(e){var t=e.isConected,s=(e.setIsConected,Object(n.useState)(!1)),o=Object(i.a)(s,2),c=o[0],a=o[1],r="".concat("http://localhost:3001/api","/post");return console.log(r),Object(l.jsx)("main",{children:t&&Object(l.jsxs)("div",{className:"content-main",children:[Object(l.jsx)(P,{postM:c,setPostM:a}),Object(l.jsx)(A,{url:r,postM:c,setPostM:a})]},Date.now())})};s(36);var B=function(){sessionStorage.clear();var e=Object(n.useState)(""),t=Object(i.a)(e,2),s=t[0],o=t[1],c=Object(n.useState)(""),a=Object(i.a)(c,2),r=a[0],m=a[1],d=Object(n.useState)(""),u=Object(i.a)(d,2),p=u[0],j=u[1],f=Object(n.useState)(""),b=Object(i.a)(f,2),h=b[0],O=b[1],x=Object(n.useState)(""),v=Object(i.a)(x,2),N=v[0],S=v[1],w=!1,_=function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),J(),window.location.href="../";case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I={nom:s,prenom:r,adresse_email:p,mot_de_passe:h},k={method:"POST",headers:g(),mode:"cors",cache:"default",body:JSON.stringify(I)},J=function(){fetch("http://localhost:3001/api/auth/signup",k).then((function(e){return e.json()})).then((function(e){console.log(e.status),S(e.message)}))};return""!==s&&""!==r&&/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[-+!*$@%_])([-+!*$@%_\w]{8,15})$/.test(h)&&function(e){return/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(e)}(p)&&(w=!0),Object(l.jsxs)("div",{children:[Object(l.jsxs)("form",{onSubmit:_,id:"form-signup",className:"form-log-sign",children:[Object(l.jsx)("label",{name:"nom-label",htmlFor:"nom"}),Object(l.jsx)("input",{id:"nom-signup",className:"input-form nom",name:"nom",type:"text",placeholder:"*nom",value:s,onChange:function(e){o(e.target.value)}}),Object(l.jsx)("label",{name:"prenom-label",htmlFor:"prenom"}),Object(l.jsx)("input",{id:"prenom-signup",className:"input-form prenom",name:"prenom",type:"text",placeholder:"*prenom",value:r,onChange:function(e){m(e.target.value)}}),Object(l.jsx)("label",{name:"email-label",htmlFor:"email"}),Object(l.jsx)("input",{id:"email-signup",className:"input-form email",name:"email",type:"text",placeholder:"*email",value:p,onChange:function(e){j(e.target.value)}}),Object(l.jsx)("label",{name:"password-label",htmlFor:"password"}),Object(l.jsx)("input",{id:"password-signup",className:"input-form password",name:"password",type:"password",placeholder:"*mot de passe",value:h,onChange:function(e){O(e.target.value)}}),Object(l.jsx)("label",{name:"submit-label",htmlFor:"submit"}),w&&Object(l.jsx)("button",{id:"submit-signup",className:"button-form button-log submit-log",name:"submit",type:"submit",children:"envoyer"})]}),Object(l.jsx)("p",{className:"message-erreur",children:N})]})};s(37);var U=function(e){var t=e.isConected,s=e.setIsConected,o=Object(n.useState)(""),c=Object(i.a)(o,2),a=c[0],r=c[1],m=Object(n.useState)(""),d=Object(i.a)(m,2),u=d[0],p=d[1],j=Object(n.useState)(""),f=Object(i.a)(j,2),b=f[0],h=f[1],O={adresse_email:a,mot_de_passe:u},x={method:"POST",headers:g(),mode:"cors",cache:"default",body:JSON.stringify(O)},v=function(){fetch("http://localhost:3001/api/auth/login",x).then((function(e){return e.json()})).then((function(e){console.log(e.user_id),h(e.message),function(e){var t=JSON.stringify(e);sessionStorage.setItem("token+id",t)}(e),N(),function(e){e.isConected&&(s(e.isConected),sessionStorage.setItem("isCo",!0))}(e)}),(function(e){console.log(e)}))},N=function(){var e=sessionStorage.getItem("token+id"),t=JSON.parse(e);fetch("http://localhost:3001/api/auth/account/"+t.user_id).then((function(e){return e.json()})).then((function(e){e.result.forEach((function(e){console.log(e),sessionStorage.setItem("userIsCo",JSON.stringify(e))}))}))};return Object(l.jsxs)("div",{children:[" ",t?window.location.href="../main":Object(l.jsxs)("div",{children:[Object(l.jsxs)("form",{id:"form-login",className:"form-log-sign",onSubmit:function(e){e.preventDefault(),v()},children:[Object(l.jsx)("label",{htmlFor:"email-login"}),Object(l.jsx)("input",{className:"input-form input-log email-log",name:"email-login",type:"email",placeholder:"*email",value:a,onChange:function(e){r(e.target.value)}}),Object(l.jsx)("label",{htmlFor:"password-login"}),Object(l.jsx)("input",{className:"input-form input-log password-log",name:"password-login",type:"password",placeholder:"*mot de passe",value:u,onChange:function(e){p(e.target.value)}}),Object(l.jsx)("button",{className:"button-form button-log submit-log",name:"submit-login",type:"submit",children:"envoyer"})]}),Object(l.jsx)("p",{className:"message-erreur",children:b})]})]})},L=(s(38),s(39),function(e){console.log(e.userModif);var t=Object(n.useState)(""),s=Object(i.a)(t,2),o=s[0],c=s[1],a=Object(n.useState)(""),r=Object(i.a)(a,2),m=r[0],d=r[1],u=Object(n.useState)(""),p=Object(i.a)(u,2),j=p[0],f=p[1],b=Object(n.useState)(""),h=Object(i.a)(b,2),O=h[0],g=h[1],x=Object(n.useState)([]),v=Object(i.a)(x,2),N=v[0],S=v[1],w=sessionStorage.getItem("token+id"),_=JSON.parse(w),y=_.user_id,C=new FormData;C.append("nom",o),C.append("prenom",m),C.append("adresse_email",j),C.append("mot_de_passe",O),C.append("media",N);var I=sessionStorage.getItem("userIsCo"),k=JSON.parse(I);""===o&&C.set("nom",k.nom),""===m&&C.set("prenom",k.prenom),""===j&&C.set("adresse_email",k.adresse_email),""===O&&C.set("mot_de_passe",_.password),N||C.set("image_url",k.image_url);var J=new Headers;J.append("Authorization","Bearer "+_.token);var F={method:"PUT",headers:J,mode:"cors",cache:"default",body:C},E="http://localhost:3001/api/auth/account/"+y;return Object(l.jsx)("div",{children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch(E,F).then((function(e){return e.json()})).then((function(e){}),(function(e){console.log(e)})),sessionStorage.removeItem("UIC"),window.location.href="./account"},id:"form-modif",className:"form-modif",children:[Object(l.jsx)("label",{htmlFor:"nom-modif"}),Object(l.jsx)("input",{className:"input-form-modif",name:"nom-modif",type:"text",placeholder:"*Nom",value:o,onChange:function(e){c(e.target.value)}}),Object(l.jsx)("label",{htmlFor:"prenom-modif"}),Object(l.jsx)("input",{className:"input-form-modif",name:"prenom-modif",type:"text",placeholder:"*Prenom",value:m,onChange:function(e){d(e.target.value)}}),Object(l.jsx)("label",{htmlFor:"email-modif"}),Object(l.jsx)("input",{className:"input-form-modif",name:"email-modif",type:"text",placeholder:"*@mail",value:j,onChange:function(e){f(e.target.value)}}),Object(l.jsx)("label",{name:"mot-de-passe-modif"}),Object(l.jsx)("input",{className:"input-form-modif",htmlFor:"avatar-modif",type:"password",placeholder:"*Mot de passe FORT",value:O,onChange:function(e){g(e.target.value)}}),Object(l.jsx)("label",{className:"avatar-modif",name:"avatar-modif",children:"Avatar"}),Object(l.jsx)("input",{className:"input-file",type:"file",onChange:function(e){console.log(e.target.files[0]);var t=e.target.files[0];S(t)}}),Object(l.jsx)("button",{className:"input-form submit-modif",type:"submit",children:"Valid\xe9 la modification"})]})})}),H=function(){var e=!1;if(window.confirm("Etes vous sur de vouloir supprimer votre compte? ")){var t=sessionStorage.getItem("token+id"),s=JSON.parse(t),n=s.user_id,o="http://localhost:3001/api/auth/account/"+n,c={user_id:n,token:s.token},a=new Headers;a.append("Content-type","application/json"),a.append("Authorization","Bearer "+s.token);var i={method:"DELETE",headers:a,mode:"cors",cache:"default",body:JSON.stringify(c)};fetch(o,i).then((function(e){return e.json(c.token)})),e=!0}return Object(l.jsx)("div",{children:e&&Object(l.jsx)("div",{children:setTimeout((function(){document.location.href="../",sessionStorage.clear()}),100)})})},V="http://localhost:3001/api/auth/account/";var q=function(e){var t=e.isConected,s=Object(n.useState)([]),o=Object(i.a)(s,2),c=o[0],a=o[1],r=Object(n.useState)(!1),m=Object(i.a)(r,2),d=m[0],u=m[1],p=sessionStorage.getItem("token+id"),j=JSON.parse(p);return Object(n.useEffect)((function(){var e=j.user_id,t=V+e,s={method:"GET",headers:g(),mode:"cors",cache:"default"};fetch(t,s).then((function(e){return e.json()})).then((function(e){a(e.result)}),(function(e){console.log("error : ",e)}))}),[]),console.log(c),Object(l.jsxs)("div",{children:[Object(l.jsx)("section",{className:"section-profil",children:t&&Object(l.jsx)("div",{className:"content-full-profil",children:c.map((function(e){return d?Object(l.jsxs)("div",{className:"content-profil-modif",children:[Object(l.jsx)("img",{className:"avatar-profil avatar-profil-modif",src:V.split("api")[0]+"images/avatars/"+e.image_url,alt:"Avatar utilisateur"}),Object(l.jsx)(L,{userModif:d})]},Date.now()):Object(l.jsxs)("div",{className:"content-profil",children:[Object(l.jsx)("h2",{className:"profil",children:"PROFIL "}),Object(l.jsxs)("p",{className:"profil-info",children:[Object(l.jsx)("span",{className:"profil-info-static",children:"nom :"})," ",Object(l.jsx)("span",{className:"profil-info-dynamique",children:e.nom})]}),Object(l.jsxs)("p",{className:"profil-info",children:[Object(l.jsx)("span",{className:"profil-info-static",children:"prenom :"})," ",Object(l.jsx)("span",{className:"profil-info-dynamique",children:e.prenom})]}),Object(l.jsxs)("p",{className:"profil-info",children:[Object(l.jsx)("span",{className:"profil-info-static",children:"adresse email :"})," ",Object(l.jsx)("span",{className:"profil-info-dynamique",children:e.adresse_email})]}),Object(l.jsx)("img",{className:"avatar-profil",src:V.split("api")[0]+"images/avatars/"+e.image_url,alt:"Avatar utilisateur"}),Object(l.jsxs)("div",{className:"content-button-profil",children:[Object(l.jsxs)("button",{alt:"modifier le compte",className:"button-account",onClick:function(){u(!0)},children:["\ud83d\udee0",Object(l.jsx)("span",{className:"no-mobile",children:" modifier"})]}),Object(l.jsxs)("button",{alt:"suprimez le compte",className:"button-account button-account-del",onClick:function(){return H()},children:["\u26d4",Object(l.jsx)("span",{className:"no-mobile",children:" suprimer le compte"})]})]},Date.now()+Date.now())]},Date.now())}))})}),Object(l.jsx)("section",{children:Object(l.jsx)(A,{url:"http://localhost:3001/api/auth/post/485"})})]})},G=(s(40),function(){return Object(l.jsx)("footer",{children:Object(l.jsxs)("p",{className:"text-footer",children:["Copyright ",Object(l.jsx)("a",{href:"mailto:magin.code@gmail.com",children:"@Magin-code 2021"})]})})}),$=s(19),R=s(3);s(41);var Q=function(){console.log(document.URL);var e=sessionStorage.getItem("isCo"),t=JSON.parse(e),s=Object(n.useState)(t),o=Object(i.a)(s,2),c=o[0],a=o[1];return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsxs)($.a,{children:[Object(l.jsx)(f,{isConected:c,setIsConected:a}),Object(l.jsx)(R.a,{path:"/signup",exact:!0,component:B}),Object(l.jsx)(R.a,{path:"/login",exact:!0,component:function(){return Object(l.jsx)(U,{isConected:c,setIsConected:a})}}),Object(l.jsx)(R.a,{path:"/main",exact:!0,component:function(){return Object(l.jsx)(z,{isConected:c,setIsConected:a})}}),Object(l.jsx)(R.a,{path:"/account",exact:!0,component:function(){return Object(l.jsx)(q,{onClick:q,isConected:c,setIsConected:a})}}),Object(l.jsx)(R.a,{path:"/del",exact:!0,component:function(){return Object(l.jsx)(H,{onClick:H})}}),Object(l.jsx)(R.a,{path:"/modify-post",exact:!0,component:function(){return Object(l.jsx)(E,{onClick:E})}}),Object(l.jsx)(G,{})]}),c&&0!=c?Object(l.jsx)("p",{className:"is-connected",children:"\ud83d\udfe2 connected"}):Object(l.jsxs)("p",{className:"is-connected",children:["\ud83d\udd34 ",window.location.href.includes("/signup")?Object(l.jsxs)("span",{children:[" pour pouvoir enregistrer un compte ",Object(l.jsx)("br",{})," ",Object(l.jsx)("br",{})," Veuillez entrez un mot de passe fort  et un email valide"]}):Object(l.jsx)("span",{children:"Veuillez vous connecter pour acc\xe9der au site"})," "]})]})},Z=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,51)).then((function(t){var s=t.getCLS,n=t.getFID,o=t.getFCP,c=t.getLCP,a=t.getTTFB;s(e),n(e),o(e),c(e),a(e)}))};a.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(Q,{})}),document.getElementById("root")),Z()}},[[50,1,2]]]);
//# sourceMappingURL=main.1f4eb7dd.chunk.js.map